#################### ПРЕДНАСТРОЕНО ####################

1. Для большей части преднастроек можно использовать скрипт 1_pre_master.sh , в него входит:
- выставление корректных даты и времени (Москва)
- выключение SELinux и Firewalld
- изменение имени системы 
- установка sshpass (на всякий случай)
- настройка сети со статическим IP (192.168.1.36)
- установка GIT

Дополнительно необходимо сделать апдейт пакетов системы (yum update -y) и вручную добавить SSH-ключи.
Так же, для работы Логирования (ELK) - заранее скопировать необходимые rpm с папку /tmp/rpm

#################### ПОДГОТОВКА К РАЗВОРАЧИВАНИЮ ПРОЕКТА (MASTER) ####################

Необходимо:
- перейти в папку /tmp
- склонировать нужный проект из GIT - git clone git@github.com:Samsonov-Vyacheslav/final_master.git
- выдать права на исполнение скриптов - chmod -R 777 /tmp/final_master

#################### РАЗВОРАЧИВАНИЕ ПРОЕКТА (MASTER) ####################		

2. 2_mysql_master.sh - установка MySQL - в конце он выдаст номер и позицию бинлога - их нужно скопировать на SLAVE для репликации.

!!! Перед продолжением развертывания Master-сервера, необходимо развернуть Slave-сервер и передать туда номер и позицию бинлога.

3. 3_restore_wp.sh - восстановление базы данных WordPress из бэкапа.

4. 4_httpd_nginx_wp.sh - разворачивание NGINX + Apache + WordPress с копированием конфигов и настройкой балансировки (по портам 8080-8081-8082)
	Проверить балансировку можно в терминале несколько раз набрав команду curl -L http://localhost | grep 808 - в выводе команды будет видно что используются различные порты). 
	Проверить WordPress можно в браузере переходом на http://192.168.1.36:8082/ и на порты 8080 и 8081

5. 5_install_monitoring.sh - установка и настройка системы мониторинга (Prometheus + Grafana).
	Проверяется в браузере переходом на http://192.168.1.36:3000/ и последующей настройкой: 
	Меню > Administration > Data sources > Add data source > Prometheus > Ввести: http://localhost:9090 > Test&Save  и затем 
	Меню > Dashboards > New > Import > Ввести ID: 1860 > Load
	
6. 6_install_ELK.sh - установка и настройка системы логирования (Filebeat + Elasticsearh + Kibana + Logstash).
	Проверяется в браузере переходом на http://localhost:5601 и последующей настройкой:
	Меню > Discover > Create index pattern > Name = weblogs-*  + Timestamp field = @timestamp  и затем
	Dashboards > Create New Dashboard > выбрать Donut и из поиска перетащить Records
	(для генерации дополнительных данных в терминале 3-4 раза выполнить curl localhost/?333 )
